<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IP-based Tab Restriction</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
        }
        .tab {
            display: none;
            border: 1px solid #ccc;
            padding: 15px;
            margin-top: 10px;
        }
        .tab.active {
            display: block;
        }
        .tab-header {
            display: flex;
            gap: 10px;
        }
        .tab-header button {
            padding: 10px 15px;
            border: 1px solid #ccc;
            background-color: #f9f9f9;
            cursor: pointer;
        }
        .tab-header button.active {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }
        .restricted {
            display: none;
            color: red;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <h1>IP-based Tab Restriction</h1>
    <div class="tab-header">
        <button id="tab1-btn">Tab 1</button>
        <button id="tab2-btn">Tab 2</button>
        <button id="tab3-btn" style="display: none;">Tab 3</button>
    </div>
    <div id="tab1" class="tab">
        <p>Welcome! You are from Vietnam.</p>
        <p id="tab1-restricted" class="restricted">Access to this tab is restricted.</p>
    </div>
    <div id="tab2" class="tab">
        <p>Hello! You are visiting from another country.</p>
        <p id="tab2-restricted" class="restricted">Access to this tab is restricted.</p>
    </div>
    <div id="tab3" class="tab">
        <p>Error: Unable to fetch IP information. Please try again later.</p>
    </div>

    <script>
        // Elements
        const tab1 = document.getElementById('tab1');
        const tab2 = document.getElementById('tab2');
        const tab3 = document.getElementById('tab3');
        const tab1Btn = document.getElementById('tab1-btn');
        const tab2Btn = document.getElementById('tab2-btn');
        const tab3Btn = document.getElementById('tab3-btn');
        const tab1Restricted = document.getElementById('tab1-restricted');
        const tab2Restricted = document.getElementById('tab2-restricted');

        // Function to restrict access to a tab and set active tab
        function restrictTab(tab) {
            if (tab === 'tab1') {
                tab1Restricted.style.display = 'block';
                tab1Btn.disabled = true;
            } else if (tab === 'tab2') {
                tab2Restricted.style.display = 'block';
                tab2Btn.disabled = true;
            }
        }

        function activateTab(tab) {
            tab1.classList.remove('active');
            tab2.classList.remove('active');
            tab3.classList.remove('active');
            tab1Btn.classList.remove('active');
            tab2Btn.classList.remove('active');
            tab3Btn.classList.remove('active');

            if (tab === 'tab1') {
                tab1.classList.add('active');
                tab1Btn.classList.add('active');
            } else if (tab === 'tab2') {
                tab2.classList.add('active');
                tab2Btn.classList.add('active');
            } else if (tab === 'tab3') {
                tab3.classList.add('active');
                tab3Btn.classList.add('active');
                tab3Btn.style.display = 'block';
            }
        }

        // Fetch user's IP and determine country
        async function fetchUserIP() {
            try {
                const response = await fetch('https://get.geojs.io/v1/ip/country.json'); // Reliable IP API
                if (!response.ok) throw new Error('Failed to fetch IP data');

                const data = await response.json();
                const country = data.country;

                // Restrict access and activate tabs based on country
                if (country === 'VN') { // Vietnam
                    restrictTab('tab2'); // Restrict Tab 2 for Vietnam
                    activateTab('tab1'); // Activate Tab 1
                } else {
                    restrictTab('tab1'); // Restrict Tab 1 for other countries
                    activateTab('tab2'); // Activate Tab 2
                }
            } catch (error) {
                console.error('Error fetching IP data:', error);
                // Default to Tab 3 if API fails
                activateTab('tab3');
            }
        }

        // Fetch IP on page load
        fetchUserIP();
    </script>

</body>
</html>
